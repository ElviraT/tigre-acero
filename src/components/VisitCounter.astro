---
// Este componente muestra un contador de visitas simple
// No requiere props ya que funciona de forma independiente
---

<div id="visit-counter" class="fixed bottom-4 right-4 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-lg shadow-lg p-3 text-sm text-gray-700 dark:text-gray-200 z-50 border border-gray-200 dark:border-gray-700">
  <div class="flex items-center space-x-2">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
    </svg>
    <span id="visit-count" class="font-medium">Cargando visitas...</span>
  </div>
</div>

<script>
// Verificar si el navegador soporta localStorage
if (typeof window !== 'undefined') {
  // Función para verificar si es un nuevo día
  function isNewDay(lastDate) {
    if (!lastDate) return true;
    const last = new Date(lastDate);
    const now = new Date();
    return last.getDate() !== now.getDate() || 
           last.getMonth() !== now.getMonth() || 
           last.getFullYear() !== now.getFullYear();
  }

  // Inicializar el contador de visitas
  function updateVisitCounter() {
    // Obtener la fecha actual
    const now = new Date();
    const today = now.toISOString().split('T')[0]; // Formato YYYY-MM-DD
    
    // Obtener el contador actual o inicializarlo si no existe
    let visits = JSON.parse(localStorage.getItem('tigreAceroVisits') || '{"count": 0, "lastDate": ""}');
    
    // Verificar si es un nuevo día
    if (isNewDay(visits.lastDate)) {
      // Reiniciar contador para el nuevo día
      visits.count = 0;
      visits.lastDate = today;
    }
    
    // Incrementar el contador
    visits.count++;
    
    // Guardar en localStorage
    localStorage.setItem('tigreAceroVisits', JSON.stringify(visits));
    
    // Actualizar la interfaz
    document.getElementById('visit-count').textContent = `Visitas hoy: ${visits.count}`;
  }
  
  // Inicializar el contador cuando el DOM esté listo
  document.addEventListener('DOMContentLoaded', updateVisitCounter);
}
</script>

<style>
/* Estilos responsivos */
@media (max-width: 640px) {
  #visit-counter {
    right: 0.5rem;
    bottom: 0.5rem;
    font-size: 0.75rem;
    padding: 0.5rem;
  }
}
</style>
